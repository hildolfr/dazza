const translations = {
    // Greetings
    'hello': 'g\'day',
    'hi': 'g\'day',
    'hey': 'oi',
    'goodbye': 'hooroo',
    'bye': 'hooroo',
    'see you later': 'catch ya later',
    'good morning': 'g\'day mate',
    
    // People
    'friend': 'mate',
    'friends': 'mates',
    'buddy': 'mate',
    'pal': 'cobber',
    'man': 'bloke',
    'woman': 'sheila',
    'girl': 'sheila',
    'boy': 'lad',
    'guy': 'bloke',
    'guys': 'blokes',
    'person': 'cunt',
    'people': 'cunts',
    'baby': 'ankle biter',
    'child': 'little tacker',
    'children': 'little tackers',
    'tourist': 'tourist',
    'american': 'seppo',
    'british person': 'pom',
    'new zealander': 'kiwi',
    
    // Food and Drink
    'beer': 'tinnie',
    'beers': 'tinnies',
    'can of beer': 'tinnie',
    'case of beer': 'slab',
    'wine': 'plonk',
    'alcohol': 'piss',
    'drunk': 'pissed',
    'very drunk': 'maggoted',
    'sandwich': 'sanger',
    'sausage': 'snag',
    'sausages': 'snags',
    'breakfast': 'brekkie',
    'lunch': 'lunch',
    'dinner': 'tea',
    'chocolate': 'choccy',
    'candy': 'lollies',
    'cookies': 'bickies',
    'french fries': 'chips',
    'ketchup': 'tomato sauce',
    'avocado': 'avo',
    'vegetables': 'veggies',
    'mushrooms': 'mushies',
    'potatoes': 'spuds',
    'banana': 'nana',
    
    // Time
    'afternoon': 'arvo',
    'morning': 'morning',
    'evening': 'evening',
    'this afternoon': 'this arvo',
    'tomorrow': 'tomoz',
    'yesterday': 'yesterday',
    
    // Places
    'gas station': 'servo',
    'liquor store': 'bottle-o',
    'mcdonalds': 'maccas',
    'burger king': 'hungry jacks',
    'walmart': 'woolies',
    'pharmacy': 'chemist',
    'convenience store': 'milk bar',
    'hardware store': 'bunnings',
    'parking lot': 'car park',
    'sidewalk': 'footpath',
    'downtown': 'cbd',
    'rural area': 'the bush',
    'middle of nowhere': 'woop woop',
    'outback': 'outback',
    'beach': 'beach',
    'ocean': 'ocean',
    'pub': 'pub',
    'bar': 'pub',
    'home': 'home',
    'house': 'joint',
    'apartment': 'flat',
    'toilet': 'dunny',
    'bathroom': 'dunny',
    'living room': 'lounge',
    
    // Objects
    'cigarette': 'durry',
    'cigarettes': 'durries',
    'lighter': 'lighter',
    'marijuana': 'weed',
    'bong': 'bong',
    'joint': 'joint',
    'sunglasses': 'sunnies',
    'swimming costume': 'cossie',
    'swimsuit': 'cossie',
    'bikini': 'bikini',
    'flip flops': 'thongs',
    'shoes': 'shoes',
    'boots': 'boots',
    'umbrella': 'brolly',
    'cooler': 'esky',
    'pickup truck': 'ute',
    'truck': 'truck',
    'car': 'car',
    'motorcycle': 'bike',
    'bicycle': 'pushie',
    'television': 'telly',
    'phone': 'blower',
    'computer': 'compy',
    'laptop': 'lappy',
    'air conditioner': 'aircon',
    'refrigerator': 'fridge',
    'garbage': 'rubbish',
    'trash can': 'bin',
    'flashlight': 'torch',
    'blanket': 'blankie',
    
    // Activities
    'barbeque': 'barbie',
    'bbq': 'barbie',
    'party': 'piss-up',
    'celebration': 'shindig',
    'football': 'footy',
    'rugby': 'rugger',
    'cricket': 'cricket',
    'surfing': 'surfing',
    'swimming': 'having a dip',
    'sunbathing': 'sunbaking',
    'nap': 'kip',
    'sleep': 'kip',
    'work': 'yakka',
    'day off': 'sickie',
    'vacation': 'holiday',
    'break': 'smoko',
    'sex': 'root',
    'kiss': 'pash',
    'fight': 'blue',
    'argument': 'barney',
    'joke': 'pisstake',
    'complain': 'whinge',
    'vomit': 'chunder',
    'urinate': 'take a piss',
    
    // Descriptions
    'very': 'bloody',
    'really': 'bloody',
    'extremely': 'bloody oath',
    'definitely': 'defs',
    'absolutely': 'too right',
    'maybe': 'maybe',
    'tired': 'knackered',
    'exhausted': 'stuffed',
    'sick': 'crook',
    'broken': 'cactus',
    'dead': 'cactus',
    'finished': 'done and dusted',
    'genuine': 'fair dinkum',
    'real': 'fair dinkum',
    'honest': 'fair dinkum',
    'fake': 'dodgy',
    'suspicious': 'suss',
    'angry': 'ropeable',
    'crazy': 'troppo',
    'stupid': 'drongo',
    'idiot': 'drongo',
    'fool': 'galah',
    'lazy person': 'bludger',
    'show off': 'lair',
    'troublemaker': 'larrikin',
    'excellent': 'bonzer',
    'great': 'ripper',
    'good': 'grouse',
    'awesome': 'ace',
    'cool': 'sweet as',
    'bad': 'shithouse',
    'terrible': 'bloody awful',
    'ugly': 'munted',
    'beautiful': 'beaut',
    'big': 'massive',
    'small': 'tiny',
    'fast': 'flat out',
    'slow': 'slow as a wet week',
    'easy': 'piece of piss',
    'difficult': 'hard yakka',
    'expensive': 'exy',
    'cheap': 'cheap as chips',
    'hot weather': 'scorcher',
    'cold': 'brass monkeys',
    
    // Common phrases
    'thank you': 'cheers',
    'thanks': 'ta',
    'you\'re welcome': 'no worries',
    'no problem': 'no wukkas',
    'no problems': 'no wukkas',
    'excuse me': 'scuse me',
    'sorry': 'sorry mate',
    'yes': 'yeah',
    'no': 'nah',
    'okay': 'righto',
    'alright': 'alright',
    'wow': 'strewth',
    'oh my god': 'bloody hell',
    'damn': 'bugger',
    'shit': 'shit',
    'fuck': 'fuck',
    'go away': 'rack off',
    'shut up': 'shut ya gob',
    'i don\'t care': 'couldn\'t give a rats',
    'no problem': 'she\'ll be right',
    'it will be okay': 'she\'ll be right',
    'are you serious': 'fair dinkum?',
    'i\'m serious': 'dead set',
    'let\'s go': 'let\'s bounce',
    'hurry up': 'get a wriggle on',
    'calm down': 'settle petal',
    'take it easy': 'take it easy',
    'good luck': 'good on ya',
    'well done': 'good onya',
    
    // Aussie specific
    'australia': 'straya',
    'australian': 'aussie',
    'brisbane': 'brissy',
    'melbourne': 'melbs',
    'tasmania': 'tassie',
    'queensland': 'queensland',
    'gold coast': 'goldie',
    
    // Money
    'money': 'dosh',
    'dollar': 'buck',
    'dollars': 'bucks',
    'welfare': 'centrelink',
    'unemployment benefits': 'the dole',
    
    // Misc
    'food': 'tucker',
    'stuff': 'gear',
    'thing': 'thingo',
    'very good': 'mint',
    'information': 'goss',
    'gossip': 'goss',
    'problem': 'drama',
    'situation': 'sitch',
    'selfie': 'selfie',
    'photo': 'pic',
    'music': 'tunes',
    'police': 'coppers',
    'police officer': 'copper',
    'ambulance': 'ambo',
    'firefighter': 'firey',
    'electrician': 'sparky',
    'carpenter': 'chippy',
    'plumber': 'plumber',
    'journalist': 'journo',
    'politician': 'pollie',
    'documentary': 'doco',
    'registration': 'rego',
    'kangaroo': 'roo',
    'crocodile': 'croc',
    'mosquito': 'mozzie',
    'jellyfish': 'stinger'
};

// Create reverse mapping for Aussie to Common
const reverseTranslations = {};
for (const [english, aussie] of Object.entries(translations)) {
    reverseTranslations[aussie] = english;
}

// Additional Aussie-only terms that need translation back
const aussieOnlyTerms = {
    // Greetings
    'g\'day': 'hello',
    'gday': 'hello',
    'oi': 'hey',
    'hooroo': 'goodbye',
    
    // People
    'mate': 'friend',
    'mates': 'friends',
    'cobber': 'pal',
    'bloke': 'man',
    'blokes': 'guys',
    'sheila': 'woman',
    'lad': 'boy',
    'cunt': 'person',
    'cunts': 'people',
    'ankle biter': 'baby',
    'little tacker': 'child',
    'little tackers': 'children',
    'seppo': 'american',
    'pom': 'british person',
    'kiwi': 'new zealander',
    'bogan': 'redneck',
    'drongo': 'idiot',
    'galah': 'fool',
    'bludger': 'lazy person',
    'lair': 'show off',
    'larrikin': 'troublemaker',
    
    // Food/Drink
    'tinnie': 'beer',
    'tinnies': 'beers',
    'slab': 'case of beer',
    'plonk': 'wine',
    'piss': 'alcohol',
    'pissed': 'drunk',
    'maggoted': 'very drunk',
    'sanger': 'sandwich',
    'snag': 'sausage',
    'snags': 'sausages',
    'brekkie': 'breakfast',
    'brekky': 'breakfast',
    'tea': 'dinner',
    'choccy': 'chocolate',
    'lollies': 'candy',
    'bickies': 'cookies',
    'chips': 'french fries',
    'tomato sauce': 'ketchup',
    'avo': 'avocado',
    'veggies': 'vegetables',
    'mushies': 'mushrooms',
    'spuds': 'potatoes',
    'nana': 'banana',
    'tucker': 'food',
    'chook': 'chicken',
    
    // Time
    'arvo': 'afternoon',
    'this arvo': 'this afternoon',
    'tomoz': 'tomorrow',
    
    // Places
    'servo': 'gas station',
    'bottle-o': 'liquor store',
    'bottleo': 'liquor store',
    'maccas': 'mcdonalds',
    'hungry jacks': 'burger king',
    'woolies': 'walmart',
    'chemist': 'pharmacy',
    'milk bar': 'convenience store',
    'bunnings': 'hardware store',
    'car park': 'parking lot',
    'footpath': 'sidewalk',
    'cbd': 'downtown',
    'the bush': 'rural area',
    'woop woop': 'middle of nowhere',
    'goldie': 'gold coast',
    'brissy': 'brisbane',
    'melbs': 'melbourne',
    'tassie': 'tasmania',
    'straya': 'australia',
    'dunny': 'toilet',
    'flat': 'apartment',
    'lounge': 'living room',
    'joint': 'house',
    
    // Objects
    'durry': 'cigarette',
    'durries': 'cigarettes',
    'sunnies': 'sunglasses',
    'cossie': 'swimsuit',
    'thongs': 'flip flops',
    'brolly': 'umbrella',
    'esky': 'cooler',
    'ute': 'pickup truck',
    'pushie': 'bicycle',
    'telly': 'television',
    'blower': 'phone',
    'compy': 'computer',
    'lappy': 'laptop',
    'aircon': 'air conditioner',
    'fridge': 'refrigerator',
    'rubbish': 'garbage',
    'bin': 'trash can',
    'torch': 'flashlight',
    'blankie': 'blanket',
    
    // Activities
    'barbie': 'barbeque',
    'piss-up': 'party',
    'shindig': 'celebration',
    'footy': 'football',
    'rugger': 'rugby',
    'having a dip': 'swimming',
    'sunbaking': 'sunbathing',
    'kip': 'sleep',
    'yakka': 'work',
    'hard yakka': 'difficult',
    'sickie': 'day off',
    'holiday': 'vacation',
    'smoko': 'break',
    'root': 'sex',
    'pash': 'kiss',
    'blue': 'fight',
    'barney': 'argument',
    'pisstake': 'joke',
    'whinge': 'complain',
    'chunder': 'vomit',
    'take a piss': 'urinate',
    
    // Descriptions
    'bloody': 'very',
    'bloody oath': 'extremely',
    'defs': 'definitely',
    'too right': 'absolutely',
    'knackered': 'tired',
    'stuffed': 'exhausted',
    'crook': 'sick',
    'cactus': 'broken',
    'done and dusted': 'finished',
    'fair dinkum': 'genuine',
    'dodgy': 'fake',
    'suss': 'suspicious',
    'ropeable': 'angry',
    'troppo': 'crazy',
    'bonzer': 'excellent',
    'ripper': 'great',
    'grouse': 'good',
    'ace': 'awesome',
    'sweet as': 'cool',
    'shithouse': 'bad',
    'bloody awful': 'terrible',
    'munted': 'ugly',
    'beaut': 'beautiful',
    'massive': 'big',
    'flat out': 'fast',
    'slow as a wet week': 'slow',
    'piece of piss': 'easy',
    'exy': 'expensive',
    'cheap as chips': 'cheap',
    'scorcher': 'hot weather',
    'brass monkeys': 'cold',
    
    // Phrases
    'cheers': 'thank you',
    'ta': 'thanks',
    'no worries': 'you\'re welcome',
    'no wukkas': 'no problem',
    'no wukka': 'no problem',
    'wukkas': 'problems',
    'wukka': 'problem',
    'scuse me': 'excuse me',
    'sorry mate': 'sorry',
    'yeah': 'yes',
    'nah': 'no',
    'yeah nah': 'no',
    'nah yeah': 'yes',
    'righto': 'okay',
    'strewth': 'wow',
    'crikey': 'wow',
    'bloody hell': 'oh my god',
    'bugger': 'damn',
    'rack off': 'go away',
    'shut ya gob': 'shut up',
    'couldn\'t give a rats': 'i don\'t care',
    'she\'ll be right': 'it will be okay',
    'fair dinkum?': 'are you serious',
    'dead set': 'i\'m serious',
    'let\'s bounce': 'let\'s go',
    'get a wriggle on': 'hurry up',
    'settle petal': 'calm down',
    'good on ya': 'good luck',
    'good onya': 'well done',
    
    // Money
    'dosh': 'money',
    'buck': 'dollar',
    'bucks': 'dollars',
    'centrelink': 'welfare',
    'the dole': 'unemployment benefits',
    
    // Misc
    'gear': 'stuff',
    'thingo': 'thing',
    'mint': 'very good',
    'goss': 'gossip',
    'drama': 'problem',
    'sitch': 'situation',
    'pic': 'photo',
    'tunes': 'music',
    'coppers': 'police',
    'copper': 'police officer',
    'ambo': 'ambulance',
    'firey': 'firefighter',
    'sparky': 'electrician',
    'chippy': 'carpenter',
    'journo': 'journalist',
    'pollie': 'politician',
    'doco': 'documentary',
    'rego': 'registration',
    'roo': 'kangaroo',
    'croc': 'crocodile',
    'mozzie': 'mosquito',
    'stinger': 'jellyfish',
    'aussie': 'australian'
};

function detectLanguageDirection(text) {
    const lowerText = text.toLowerCase();
    const aussieWords = [
        'mate', 'g\'day', 'gday', 'bloody', 'arvo', 'barbie', 'tinnie', 'drongo', 
        'sheila', 'bloke', 'dunny', 'servo', 'bottle-o', 'maccas', 'bogan', 
        'strewth', 'crikey', 'bonzer', 'ripper', 'fair dinkum', 'hooroo', 'cobber',
        'sanger', 'snag', 'brekkie', 'choccy', 'durry', 'footy', 'sunnies',
        'cossie', 'brolly', 'knackered', 'cactus', 'ute', 'esky', 'thongs',
        'pissed', 'maggoted', 'galah', 'bludger', 'lair', 'larrikin', 'troppo',
        'ropeable', 'dodgy', 'suss', 'grouse', 'mint', 'ace', 'munted', 'beaut',
        'pash', 'root', 'blue', 'barney', 'whinge', 'chunder', 'yakka', 'smoko',
        'sickie', 'ta', 'righto', 'bugger', 'rack off', 'she\'ll be right',
        'yeah nah', 'nah yeah', 'dead set', 'good onya', 'settle petal',
        'the dole', 'centrelink', 'ambo', 'firey', 'sparky', 'chippy', 'journo',
        'pollie', 'doco', 'rego', 'roo', 'croc', 'mozzie', 'goldie', 'brissy',
        'melbs', 'tassie', 'straya', 'woop woop', 'the bush', 'bottle-o', 'bottleo',
        'wukka', 'wukkas', 'no wukkas'
    ];
    
    // Count Aussie words
    let aussieCount = 0;
    for (const word of aussieWords) {
        if (lowerText.includes(word)) {
            aussieCount++;
        }
    }
    
    // If we found Aussie words, it's probably Aussie slang
    return aussieCount > 0 ? 'aussie' : 'english';
}

export function translateToAussie(text) {
    const direction = detectLanguageDirection(text);
    let translated = text;
    let hasTranslation = false;
    
    if (direction === 'english') {
        // Translate English to Aussie
        for (const [english, aussie] of Object.entries(translations)) {
            const regex = new RegExp(`\\b${english}\\b`, 'gi');
            if (regex.test(text)) {
                translated = translated.replace(regex, aussie);
                hasTranslation = true;
            }
        }
        
        if (!hasTranslation) {
            return `${text} (dunno how to translate that one mate)`;
        }
    } else {
        // Translate Aussie to English
        for (const [aussie, english] of Object.entries(aussieOnlyTerms)) {
            // Escape special regex characters in the aussie term
            const escapedAussie = aussie.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            const regex = new RegExp(`\\b${escapedAussie}\\b`, 'gi');
            if (regex.test(translated)) {
                translated = translated.replace(regex, english);
                hasTranslation = true;
            }
        }
        
        if (!hasTranslation) {
            return `${text} (that's already proper Aussie mate)`;
        }
    }
    
    return `🦘 Translation: ${translated}`;
}